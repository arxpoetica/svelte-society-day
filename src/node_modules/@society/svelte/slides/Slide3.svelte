<IntersectionObserver bind:elem bind:intersecting bind:threshold/>
<div bind:this={elem} class="modal modal-sprite">
	<div class="sticky">
		<div class="panel-fixed panel-fixed-1">
			<div class="panel-clip">
				<div class="panel-content history-early-1" style="transform:scale({1 + (threshold * 0.5)});"></div>
			</div>
			<div class="panel-clip">
				<div class="panel-content history-early-2" style="transform:scale({1 + (threshold * 0.5)})"></div>
			</div>
		</div>
		<div class:fliptwo class="panel-fixed columns panel-fixed-2">
			<div class="panel-clip">
				<div class="panel-content history-later-1" style="transform:scale({1 + (threshold * 0.5)});"></div>
			</div>
			<div class="panel-clip">
				<div class="panel-content history-later-2" style="transform:scale({1 + (threshold * 0.5)});"></div>
			</div>
		</div>
		<div class:flipthree class="panel-fixed panel-fixed-3">
			<div class="panel-clip">
				<div class="panel-content history-early-1" style="transform:scale({1 + (threshold * 0.5)});"></div>
			</div>
		</div>
	</div>
	<div class="content">
		<div class="panel-scroll panel-1">

			<blockquote>
				Among the oldest type of cave paintings <br>are hand stencils and simple geometric shapes.
			</blockquote>

			<blockquote>
				“This one is magic, because it has lava. And a storm, <br>and chacks (sticks that go up and down in the storm).”
			</blockquote>

<!-- After listening to all these points, here's my perhaps heavy-handed take, ha. Tailwind is today's CSS equivalent of yesterday's jQuery. -->
<!-- It solves a problem "easily," but at the end of the day it's still not really solving an underlying problem: CSS is still just not what it needs to be. -->
<!-- I'm actually (to some degree) surprised to hear myself say that, but once it came out of my mouth, it actually makes a lot of sense. -->
<!-- Basically, styling, animation, and the web on whole is just really hard to work with as a medium. -->
<!-- So funny thing: this conversation just folded very nicely into my talk. -->
<!-- Thanks, ha. -->


		</div>
		<div class="panel-scroll panel-2">
		</div>
		<div class="panel-scroll panel-3"></div>
	</div>
</div>

<script>
	import { story_scroll, view_height } from '@society/js/stores.js'
	import IntersectionObserver from '@society/svelte/IntersectionObserver.svelte'
	let elem, intersecting, threshold

	$: fliptwo = threshold > 1/3
	$: flipthree = threshold > 2/3
</script>

<style type="text/scss">
	.modal-sprite {
		overflow: visible;
		display: flex;
		background-color: #222;
	}

	.panel-fixed {
		opacity: 0;
		transition: opacity 0.75s ease-in-out;
		&.fliptwo { opacity: 1; }
		&.flipthree { opacity: 1; }
	}
	.panel-fixed-1 { flex-direction: column; opacity: 1; }
	// .panel-fixed-2 {}
	.history-early-1 { background-image: url('/img/slides/history-cave-paintings.jpg'); }
	.history-early-2 { background-image: url('/img/slides/history-son-painting.jpg'); }
	.history-later-1 { background-image: url('/img/slides/history-vietnam-woodblock.jpg'); }
	.history-later-2 { background-image: url('/img/slides/history-maya-writing.jpg'); }

	// .panel-1 {}
	.panel-2 { background-color: black; }
	// .panel-3 {}

	blockquote {
		width: 100%;
		margin: 0 auto;
	}
</style>
