<IntersectionObserver bind:elem bind:intersecting bind:threshold/>
<div bind:this={elem} class="modal modal-sprite">
	<div class="content">
		<div class="set on">
			<h3 class="one on">Tables</h3>
			<div class="arrow">➡</div>
			<h3 class:flip2 class="two">CSS</h3>
		</div>
		<div class="set" class:flip3>
			<h3 class:flip3 class="one">jQuery</h3>
			<div class="arrow">➡</div>
			<h3 class:flip4 class="two">Modern Frameworks</h3>
		</div>
		<div class="set" class:flip5>
			<h3 class:flip5 class="one">Runtime Compilers</h3>
			<div class="arrow">➡</div>
			<h3 class:flip6 class="two">JavaScript Compilers</h3>
		</div>
	</div>
</div>

<script>
	import { onMount } from 'svelte'
	import { story_scroll, view_height } from '@society/js/stores.js'
	import IntersectionObserver from '@society/svelte/IntersectionObserver.svelte'
	let elem, intersecting, threshold

	$: flip2 = threshold > 5/20
	$: flip3 = threshold > 8/20
	$: flip4 = threshold > 10/20
	$: flip5 = threshold > 12/20
	$: flip6 = threshold > 14/20
</script>

<style type="text/scss">
	.modal-sprite {
		overflow: visible;
		display: flex;
		background-color: #222;
		height: 250vh;
	}
	.content {
		overflow: hidden;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		position: sticky;
		top: -1rem;
		height: calc(100vh - 99rem);
		width: 100%;
	}
	.set {
		display: grid;
		grid-template-columns: 1fr auto 1fr;
		justify-content: center;
		grid-gap: 50rem;
		margin: 0 0 200rem;
		opacity: 0;
		transition: all 1s ease-in-out;
		&.on { opacity: 1; }
		&.flip3 { opacity: 1; }
		&.flip5 { opacity: 1; }
		&:last-child {
			margin: 0;
		}
	}
	h3 {
		margin: 0;
		display: flex;
		align-items: center;
		opacity: 0;
		transition: all 1s ease-in-out;
		&.on { opacity: 1; }
		&.flip2 { opacity: 1; }
		&.flip3 { opacity: 1; }
		&.flip4 { opacity: 1; }
		&.flip5 { opacity: 1; }
		&.flip6 { opacity: 1; }
		&.one { justify-content: flex-end; }
	}
	.arrow {
		font-size: 50rem;
	}
</style>
